我会帮你优化排版（统一Markdown格式、调整层级、修正细节），同时优化内容逻辑和可读性：


# DSL智能对话系统
基于领域特定语言（DSL）的多场景智能对话平台，支持灵活配置的客服咨询、信息查询等业务流程。


## 项目概述
这是一个**基于领域特定语言（DSL）的智能对话系统**，核心支持：
- 多轮对话状态维护
- 意图识别与关键词匹配
- 静默超时自动处理
适用于客服咨询、信息查询等场景，可通过DSL脚本快速定制业务流程。


## 项目结构
```
DSL-Project/
├── back/                          # 后端核心模块
│   ├── interpreter.py            # DSL解释器（词法/语法分析、AST执行）
│   ├── LLMClient.py              # 星火大模型客户端（多版本适配）
│   └── __pycache__/              # Python编译缓存（无需上传）
├── webapp/                       # Web前端应用
│   ├── frontend/
│   │   ├── static/              # 静态资源（CSS/JS/图片）
│   │   ├── templates/           # HTML模板文件
│   │   └── web_output.py        # Flask Web服务器入口
│   └── __pycache__/              # Python编译缓存（无需上传）
├── test/                         # 测试模块
│   ├── test_suite.py            # 完整测试套件（单元+集成测试）
│   ├── test_stubs.py            # 测试桩（模拟依赖）
│   └── __pycache__/              # Python编译缓存（无需上传）
├── spotServer.dsl               # 故宫博物院客服DSL脚本（业务示例）
├── productSale.dsl              # 产品销售DSL脚本（范例1）
├── weather.dsl                  # 天气查询DSL脚本（范例2）
├── .env                         # 环境变量配置（需忽略，含敏感信息）
├── README.md                    # 项目说明文档
└── venv/                        # Python虚拟环境（无需上传）
```


## 核心功能
### 1. DSL解释器
- **词法分析**：将DSL脚本分解为标准化Token流
- **语法分析**：基于Token构建对话流程的抽象语法树（AST）
- **语义执行**：解析AST并驱动对话流程的实际运行


### 2. 对话管理
- 多轮对话状态维护（记录上下文）
- 关键词精确匹配（优先）+ AI意图识别（备用）
- 静默超时处理（单次超时提醒、总超时自动结束）


### 3. Web接口能力
- 提供RESTful API接口
- 会话生命周期管理
- 实时对话交互支持
- 内置DSL语法规范校验


### 4. DSL基础结构（脚本示例）
DSL采用**步骤化配置**，核心语法结构：
```dsl
Step 初始步骤名
  Speak "欢迎语内容"          # 机器人发言
  Listen 10, 30              # 监听用户输入（单次超时10s，总超时30s）
  Branch "关键词1", 目标步骤1  # 关键词匹配后跳转
  Branch "关键词2", 目标步骤2
  Default 默认步骤            # 无匹配时的默认跳转
  Silence 超时处理步骤        # 静默超时后的处理步骤
  Exit                       # 结束对话
```

**关键字说明**：
| 关键字   | 作用                     |
|----------|--------------------------|
| `Step`   | 定义对话流程的单个步骤   |
| `Speak`  | 配置机器人的发言内容     |
| `Listen` | 设置用户输入的超时规则   |
| `Branch` | 关键词匹配后的步骤跳转   |
| `Default`| 无匹配时的默认跳转       |
| `Silence`| 静默超时后的处理步骤     |
| `Exit`   | 终止当前对话流程         |


## 环境要求
- Python 3.7 及以上
- 依赖包：
  ```bash
  # 安装依赖（建议在虚拟环境中执行）
  pip install flask==2.0+ websocket-client
  ```


## 快速启动
### 1. 运行测试
```bash
# 进入测试目录
cd test
# 执行完整测试套件（单元+集成测试）
python test_suite.py
```


### 2. 启动Web服务
```bash
# 进入前端服务目录
cd webapp/frontend
# 启动Flask服务器
python web_output.py
```
启动后，访问 `http://localhost:5000` 即可进入对话界面。


## 测试框架
### 1. 单元测试
覆盖核心组件的基础功能：
- 词法分析器（Lexer）的Token解析准确性
- 语法分析器（Parser）的AST构建逻辑
- AST执行的流程正确性


### 2. 集成测试
验证端到端的对话流程：
- 多轮对话的上下文维护
- 意图识别与关键词匹配的准确性
- 超时机制的触发逻辑
- 异常输入的错误处理


## 配置说明
### 1. LLM客户端配置
支持星火大模型的多版本切换（在`.env`中配置）：
- `v3.5`：通用版本（默认）
- `max`：大参数量版本
- `pro`：专业场景版本


### 2. 超时配置
在DSL脚本的`Listen`关键字中设置：
- **单次超时**：用户无输入时的提醒间隔（如`10`代表10秒）
- **总超时**：累计无输入后自动结束对话的时间（如`30`代表30秒）
